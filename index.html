<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/2.0.0/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-gps-component/dist/aframe-gps-component.min.js"></script>

    <style>
      #gps-coordinates {
        position: fixed;
        bottom: 10px;
        left: 10px;
        color: white;
        font-size: 18px;
        background-color: rgba(0, 0, 0, 0.5);
        padding: 10px;
        border-radius: 5px;
        z-index: 10;
      }
    </style>
  </head>
  <body>
    <div id="gps-coordinates">Waiting for GPS...</div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: true;">
      <a-entity camera gps-camera rotation-reader></a-entity>
    </a-scene>

    <script>
      const gpsCoordinatesDiv = document.getElementById('gps-coordinates');

      // Listen for GPS updates from the gps-camera
      document.querySelector('[gps-camera]').addEventListener('gps-camera-update-position', function(event) {
        const latitude = event.detail.position.latitude.toFixed(6);
        const longitude = event.detail.position.longitude.toFixed(6);
        
        // Update GPS coordinates on the screen
        gpsCoordinatesDiv.innerHTML = `Latitude: ${latitude}<br>Longitude: ${longitude}`;
        console.log(`Latitude: ${latitude}, Longitude: ${longitude}`);
      });

      // Error handling
      document.querySelector('[gps-camera]').addEventListener('gps-camera-error', function(event) {
        gpsCoordinatesDiv.innerHTML = 'Error getting GPS location: ' + event.detail.error;
      });
    </script>
  </body>
</html>
